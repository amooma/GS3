-- ------------------------------------------------------------------
-- CHANGES TO THE DATABASE
-- $Revision$
-- ------------------------------------------------------------------


--
-- since rev. 3968
--

USE `asterisk`;


--
-- Create new table `boi_perms`:
--

CREATE TABLE IF NOT EXISTS `boi_perms` (
  `user_id` int(10) unsigned NOT NULL,
  `host_id` mediumint(8) unsigned NOT NULL,
  `roles` varchar(8) character set ascii NOT NULL,
  PRIMARY KEY  (`user_id`,`host_id`),
  UNIQUE KEY `host_user` (`host_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


--
-- Modify `host` column in table `hosts`:
--

ALTER TABLE `hosts`
  CHANGE `host` `host` VARCHAR(15) CHARACTER SET ascii COLLATE ascii_general_ci NOT NULL;


--
-- Add new column `is_foreign` in table `hosts`:
--

ALTER TABLE `hosts` ADD
  `is_foreign` TINYINT(1) UNSIGNED NOT NULL default '0' AFTER `comment`;
ALTER TABLE `hosts` ADD
  INDEX `is_foreign_id` (`is_foreign`,`id`);
ALTER TABLE `hosts` ADD
  INDEX `is_foreign_host` (`is_foreign`,`host`);


--
-- Add index for column `comment` in table `hosts`:
--

ALTER TABLE `hosts` ADD
  INDEX `comment` (`comment`(20));
ALTER TABLE `hosts` ADD
  INDEX `foreign_comment` (`is_foreign`,`comment`(20));


--
-- Add new column `group_id` in table `hosts`:
--

ALTER TABLE `hosts` ADD
  `group_id` MEDIUMINT(8) UNSIGNED NOT NULL default '0' AFTER `is_foreign`;
ALTER TABLE `hosts` ADD
  INDEX `group_id` (`group_id`);


--
-- Create new table `softkey_profiles`:
--

CREATE TABLE IF NOT EXISTS `softkey_profiles` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `is_user_profile` tinyint(1) unsigned NOT NULL default '0',
  `title` varchar(50) character set utf8 collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `title` (`title`(45)),
  KEY `is_user_profile_title` (`is_user_profile`,`title`(45))
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


--
-- Create new table `softkeys`:
--

-- Old structure was:
-- CREATE TABLE IF NOT EXISTS `softkeys` (
--   `user_id` int(10) unsigned NOT NULL default '0',
--   `phone` varchar(20) NOT NULL default '',
--   `key` varchar(10) NOT NULL default '',
--   `number` varchar(30) NOT NULL default '',
--   PRIMARY KEY  (`user_id`,`phone`,`key`)
-- ) ENGINE=InnoDB DEFAULT CHARSET=ascii;

DROP TABLE IF EXISTS `softkeys`;
CREATE TABLE IF NOT EXISTS `softkeys` (
  `profile_id` int(10) unsigned NOT NULL default '0',
  `phone_type` varchar(20) NOT NULL,
  `key` varchar(10) NOT NULL,
  `function` varchar(15) NOT NULL,
  `data` varchar(100) NOT NULL,
  `label` varchar(40) character set utf8 collate utf8_unicode_ci NOT NULL,
  `user_writeable` tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (`profile_id`,`phone_type`,`key`),
  KEY `phone_type_key` (`phone_type`,`key`),
  KEY `phone_type_function` (`phone_type`,`function`)
) ENGINE=InnoDB DEFAULT CHARSET=ascii;


--
-- Add new column `softkey_profile_id` in table `users`:
--

ALTER TABLE `users` ADD
  `softkey_profile_id` INT(10) UNSIGNED default NULL AFTER `user_comment`;
ALTER TABLE `users` ADD
  INDEX `softkey_profile_id` (`softkey_profile_id`);


--
-- Create new table `user_groups`:
--

CREATE TABLE IF NOT EXISTS `user_groups` (
  `id` mediumint(8) unsigned NOT NULL auto_increment,
  `lft` mediumint(8) unsigned NOT NULL,
  `rgt` mediumint(8) unsigned NOT NULL,
  `name` varchar(20) character set ascii NOT NULL,
  `title` varchar(50) collate utf8_unicode_ci NOT NULL,
  `softkey_profile_id` int(10) unsigned default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `name` (`name`),
  UNIQUE KEY `lft` (`lft`),
  UNIQUE KEY `rgt` (`rgt`),
  KEY `softkey_profile_id` (`softkey_profile_id`),
  KEY `title` (`title`(40)),
  KEY `lft_rgt` (`lft`,`rgt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `user_groups` VALUES (1,1,2,'root-node','Root node',NULL,NULL);


--
-- Add new column `group_id` in table `users`:
--

ALTER TABLE `users` ADD
  `group_id` MEDIUMINT(8) UNSIGNED default NULL AFTER `user_comment`;
ALTER TABLE `users` ADD
  INDEX `group_id` (`group_id`);


--
-- Change index `mac_addr` in table `phones` to a unique index:
--

ALTER TABLE `phones`
  DROP INDEX `mac_addr`, ADD UNIQUE `mac_addr` (`mac_addr`);


--
-- Create new table `host_params`:
--

CREATE TABLE IF NOT EXISTS `host_params` (
  `host_id` mediumint(8) unsigned NOT NULL,
  `param` varchar(25) character set ascii NOT NULL,
  `value` varchar(100) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`host_id`,`param`),
  KEY `param_value` (`param`,`value`(20))
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `host_params` (`host_id`, `param`, `value`)
  (SELECT `id`, 'api', 'm01' FROM `hosts` WHERE `is_foreign`=1);


--
-- Create new table `prov_param_profiles`:
--

CREATE TABLE IF NOT EXISTS `prov_param_profiles` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `is_group_profile` tinyint(1) unsigned NOT NULL default '1',
  `title` varchar(50) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `is_group_profile_title` (`is_group_profile`,`title`(45)),
  KEY `title` (`title`(45))
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


--
-- Create new table `prov_params`:
--

CREATE TABLE IF NOT EXISTS `prov_params` (
  `profile_id` int(10) unsigned NOT NULL,
  `phone_type` varchar(20) character set ascii NOT NULL,
  `param` varchar(50) character set ascii NOT NULL,
  `index` smallint(5) NOT NULL default '-1',
  `value` varchar(100) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`profile_id`,`phone_type`,`param`,`index`),
  KEY `phone_type_param_index` (`phone_type`,`param`,`index`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


--
-- Add new column `prov_param_profile_id` in table `user_groups`:
--

ALTER TABLE `user_groups` ADD
  `prov_param_profile_id` INT UNSIGNED NULL AFTER `softkey_profile_id`;
ALTER TABLE `user_groups` ADD
  INDEX `prov_param_profile_id` (`prov_param_profile_id`);


--
-- Create new view `ast_sipfriends_gs`:
--

/*!50001 DROP TABLE IF EXISTS `ast_sipfriends_gs`*/;
/*!50001 DROP VIEW IF EXISTS `ast_sipfriends_gs`*/;
/*!50001 CREATE ALGORITHM=MERGE */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ast_sipfriends_gs` AS (
  SELECT
    `s`.`_user_id`, `s`.`name`, `s`.`secret`, `s`.`type`, `s`.`host`,
    `s`.`defaultip`, `s`.`context`, `s`.`callerid`, `s`.`mailbox`,
    `s`.`callgroup`, `s`.`pickupgroup`, `s`.`setvar`, `s`.`call-limit`,
    `s`.`subscribecontext`, `s`.`regcontext`, `s`.`ipaddr`, `s`.`port`,
    `s`.`regseconds`, `s`.`username`, `s`.`regserver`, `s`.`fullcontact`
  FROM
    `ast_sipfriends` `s` JOIN
    `users` `u` ON (`u`.`id` = `s`.`_user_id`) JOIN
    `hosts` `h` ON (`h`.`id` = `u`.`host_id`)
  WHERE `h`.`is_foreign`=0
) */
/*!50002 WITH CASCADED CHECK OPTION */;


--
-- Add foreign key constraints (optional):
--

ALTER TABLE `ast_queue_members`
  ADD CONSTRAINT `ast_queue_members_ibfk_1`
  FOREIGN KEY (`_queue_id`) REFERENCES `ast_queues` (`_id`);
ALTER TABLE `ast_queue_members`
  ADD CONSTRAINT `ast_queue_members_ibfk_2`
  FOREIGN KEY (`_user_id`) REFERENCES `users` (`id`);

ALTER TABLE `ast_queues`
  ADD CONSTRAINT `ast_queues_ibfk_1`
  FOREIGN KEY (`_host_id`) REFERENCES `hosts` (`id`);

ALTER TABLE `ast_sipfriends`
  ADD CONSTRAINT `ast_sipfriends_ibfk_1`
  FOREIGN KEY (`_user_id`) REFERENCES `users` (`id`);

ALTER TABLE `ast_voicemail`
  ADD CONSTRAINT `ast_voicemail_ibfk_1`
  FOREIGN KEY (`_user_id`) REFERENCES `users` (`id`);

ALTER TABLE `boi_perms`
  ADD CONSTRAINT `boi_perms_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);
ALTER TABLE `boi_perms`
  ADD CONSTRAINT `boi_perms_ibfk_2`
  FOREIGN KEY (`host_id`) REFERENCES `hosts` (`id`);

ALTER TABLE `callblocking`
  ADD CONSTRAINT `callblocking_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `callforwards`
  ADD CONSTRAINT `callforwards_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `callwaiting`
  ADD CONSTRAINT `callwaiting_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `clir`
  ADD CONSTRAINT `clir_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `conferences`
  ADD CONSTRAINT `conferences_ibfk_1`
  FOREIGN KEY (`host_id`) REFERENCES `hosts` (`id`);

ALTER TABLE `dial_log`
  ADD CONSTRAINT `dial_log_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `gates`
  ADD CONSTRAINT `gates_ibfk_1`
  FOREIGN KEY (`grp_id`) REFERENCES `gate_grps` (`id`);

ALTER TABLE `host_params`
  ADD CONSTRAINT `host_params_ibfk_1`
  FOREIGN KEY (`host_id`) REFERENCES `hosts` (`id`)
  ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `instant_messaging`
  ADD CONSTRAINT `instant_messaging_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `pb_prv`
  ADD CONSTRAINT `pb_prv_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `phones`
  ADD CONSTRAINT `phones_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `pickupgroups_users`
  ADD CONSTRAINT `pickupgroups_users_ibfk_1`
  FOREIGN KEY (`group_id`) REFERENCES `pickupgroups` (`id`);
ALTER TABLE `pickupgroups_users`
  ADD CONSTRAINT `pickupgroups_users_ibfk_2`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `prov_params`
  ADD CONSTRAINT `prov_params_ibfk_1`
  FOREIGN KEY (`profile_id`) REFERENCES `prov_param_profiles` (`id`)
  ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `queue_callforwards`
  ADD CONSTRAINT `queue_callforwards_ibfk_1`
  FOREIGN KEY (`queue_id`) REFERENCES `ast_queues` (`_id`);

ALTER TABLE `queue_log`
  ADD CONSTRAINT `queue_log_ibfk_1`
  FOREIGN KEY (`queue_id`) REFERENCES `ast_queues` (`_id`);

ALTER TABLE `ringtones`
  ADD CONSTRAINT `ringtones_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `routes_in`
  ADD CONSTRAINT `routes_in_ibfk_1`
  FOREIGN KEY (`gate_grp_id`) REFERENCES `gate_grps` (`id`);

ALTER TABLE `softkeys`
  ADD CONSTRAINT `softkeys_ibfk_1`
  FOREIGN KEY (`profile_id`) REFERENCES `softkey_profiles` (`id`);

ALTER TABLE `user_groups`
  ADD CONSTRAINT `user_groups_ibfk_6`
  FOREIGN KEY (`prov_param_profile_id`) REFERENCES `prov_param_profiles` (`id`);
ALTER TABLE `user_groups`
  ADD CONSTRAINT `user_groups_ibfk_5`
  FOREIGN KEY (`softkey_profile_id`) REFERENCES `softkey_profiles` (`id`);

ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_4`
  FOREIGN KEY (`softkey_profile_id`) REFERENCES `softkey_profiles` (`id`)
  ON DELETE SET NULL ON UPDATE SET NULL;
ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_2`
  FOREIGN KEY (`group_id`) REFERENCES `user_groups` (`id`)
  ON DELETE SET NULL ON UPDATE SET NULL;
ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_3`
  FOREIGN KEY (`host_id`) REFERENCES `hosts` (`id`);

ALTER TABLE `users_external_numbers`
  ADD CONSTRAINT `users_external_numbers_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `vm`
  ADD CONSTRAINT `vm_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

ALTER TABLE `vm_msgs`
  ADD CONSTRAINT `vm_msgs_ibfk_1`
  FOREIGN KEY (`host_id`) REFERENCES `hosts` (`id`);
ALTER TABLE `vm_msgs`
  ADD CONSTRAINT `vm_msgs_ibfk_2`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);


--
-- since rev. 4804
--

USE `asterisk`;


--
-- Add new column `email_notify` in table `vm`:
--

ALTER TABLE `vm` ADD
  `email_notify` TINYINT(1) UNSIGNED NOT NULL default '0' AFTER `external_active`;


--
-- since rev. 4980
--

USE `asterisk`;


--
-- Add new column `prov_param_profile_id` in table `users`:
--

ALTER TABLE `users` ADD
  `prov_param_profile_id` INT UNSIGNED NULL AFTER `softkey_profile_id`;
ALTER TABLE `users` ADD
  INDEX `prov_param_profile_id` (`prov_param_profile_id`);
ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_5`
  FOREIGN KEY (`prov_param_profile_id`) REFERENCES `prov_param_profiles` (`id`)
  ON DELETE SET NULL ON UPDATE SET NULL;


--
-- since rev. 5048
--

USE `asterisk`;


--
-- Add new column `firmware_cur` in table `phones`:
--

ALTER TABLE `phones` ADD
  `firmware_cur` VARCHAR(25) CHARACTER SET ascii COLLATE ascii_general_ci NOT NULL AFTER `added`;


--
-- since rev. 5063
--

USE `asterisk`;


--
-- Add new column `show_ext_modules` in table `user_groups`:
--

ALTER TABLE `user_groups` ADD
  `show_ext_modules` TINYINT(1) UNSIGNED NOT NULL DEFAULT '255' AFTER `prov_param_profile_id`;


--
-- since rev. 5082
--

USE `asterisk`;


--
-- Create new table `prov_jobs`:
--

CREATE TABLE IF NOT EXISTS `prov_jobs` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `inserted` int(10) unsigned NOT NULL default '0',
  `running` tinyint(1) unsigned NOT NULL default '0',
  `trigger` enum('client','server') character set ascii NOT NULL default 'client',
  `phone_id` int(10) unsigned NOT NULL,
  `type` varchar(10) character set ascii NOT NULL default 'settings',
  `immediate` tinyint(1) unsigned NOT NULL default '0',
  `minute` varchar(20) character set ascii collate ascii_bin NOT NULL default '*',
  `hour` varchar(20) character set ascii collate ascii_bin NOT NULL default '*',
  `day` varchar(20) character set ascii collate ascii_bin NOT NULL default '*',
  `month` varchar(20) character set ascii collate ascii_bin NOT NULL default '*',
  `dow` varchar(20) character set ascii collate ascii_bin NOT NULL default '*',
  `data` varchar(100) character set ascii collate ascii_bin NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `phone_id` (`phone_id`),
  KEY `immediate` (`immediate`),
  KEY `inserted` (`inserted`),
  KEY `type` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


--
-- since rev. 5387
--

USE `asterisk`;


--
-- Add index for `remote_user_id` and foreign key constraint in table `dial_log`:
--

ALTER TABLE `dial_log`
  ADD INDEX `remote_user_id` (`remote_user_id`);
UPDATE `dial_log` SET `remote_user_id`=NULL
  WHERE `remote_user_id` NOT IN (SELECT `id` FROM `users`);
ALTER TABLE `dial_log`
  ADD CONSTRAINT `dial_log_ibfk_2`
  FOREIGN KEY (`remote_user_id`) REFERENCES `users` (`id`)
  ON DELETE SET NULL ON UPDATE SET NULL;


--
-- since rev. 5532
--

USE `asterisk`;


--
-- Alter the definer of the `ast_sipfriends_gs` view:
-- 
-- This view was previously defined by the `root`@`localhost` MySQL
-- user with SQL security "definer" but should be defined by the user
-- account of Gemeinschaft with SQL security "invoker".
-- Replace "gemeinschaft" with the account name you use
-- ( grep DB_MASTER_USER /etc/gemeinschaft/gemeinschaft.php ).
--

ALTER
  ALGORITHM=MERGE
  /*!50013 DEFINER=`gemeinschaft`@`localhost` */
  /*!50013 SQL SECURITY INVOKER */
  VIEW `ast_sipfriends_gs`
  AS (
    select `s`.`_user_id` AS `_user_id`,`s`.`name` AS `name`,`s`.`secret` AS `secret`,`s`.`type` AS `type`,`s`.`host` AS `host`,`s`.`defaultip` AS `defaultip`,`s`.`context` AS `context`,`s`.`callerid` AS `callerid`,`s`.`mailbox` AS `mailbox`,`s`.`callgroup` AS `callgroup`,`s`.`pickupgroup` AS `pickupgroup`,`s`.`setvar` AS `setvar`,`s`.`call-limit` AS `call-limit`,`s`.`subscribecontext` AS `subscribecontext`,`s`.`regcontext` AS `regcontext`,`s`.`ipaddr` AS `ipaddr`,`s`.`port` AS `port`,`s`.`regseconds` AS `regseconds`,`s`.`username` AS `username`,`s`.`regserver` AS `regserver`,`s`.`fullcontact` AS `fullcontact` from ((`ast_sipfriends` `s` join `users` `u` on((`u`.`id` = `s`.`_user_id`))) join `hosts` `h` on((`h`.`id` = `u`.`host_id`))) where (`h`.`is_foreign` = 0)
  )
  /*!50002 WITH CASCADED CHECK OPTION */
  ;


--
-- since rev. 5559
--

USE `asterisk`;


--
-- Resize column `name` in table `ast_sipfriends` for storing long dummy-user extensions:
--

ALTER TABLE `ast_sipfriends`
  CHANGE `name` `name` VARCHAR(16) CHARACTER SET ascii COLLATE ascii_general_ci NOT NULL;


--
-- since rev. 5626
--

USE `asterisk`;


--
-- Add new column `number_vml` in table `callforwards`,
-- add new option 'vml' to column `active`:
--

ALTER TABLE `callforwards`
  ADD COLUMN `number_vml` VARCHAR(20) CHARACTER SET ascii COLLATE ascii_general_ci NOT NULL AFTER `number_var`;
ALTER TABLE `callforwards`
  CHANGE `active` `active` ENUM('no','std','var','vml') CHARACTER SET ascii COLLATE ascii_general_ci NOT NULL DEFAULT 'no';


--
-- since rev. 5655
--

USE `asterisk`;


--
-- Add new column `fw_manual_update` in table `phones`
--

ALTER TABLE `phones`
  ADD COLUMN `fw_manual_update` TINYINT(1) unsigned NOT NULL default '0' AFTER `firmware_cur`;


--
-- since rev. 5699
--

USE `asterisk`;


--
-- Create new table `user_watchlist`:
--

CREATE TABLE IF NOT EXISTS `user_watchlist` (
  `user_id` int(10) unsigned NOT NULL,
  `buddy_user_id` int(10) unsigned NOT NULL,
  `status` ENUM('pnd','ack','nak') character set ascii COLLATE ascii_general_ci NOT NULL default 'pnd'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

ALTER TABLE `user_watchlist`
  ADD PRIMARY KEY (`user_id`,`buddy_user_id`);
ALTER TABLE `user_watchlist`
  ADD INDEX `buddy_user_id_user_id` (`buddy_user_id`,`user_id`);
ALTER TABLE `user_watchlist`
  ADD CONSTRAINT `user_watchlist_ibfk_1`
  FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
  ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `user_watchlist`
  ADD CONSTRAINT `user_watchlist_ibfk_2`
  FOREIGN KEY (`buddy_user_id`) REFERENCES `users` (`id`)
  ON DELETE CASCADE ON UPDATE CASCADE;


--
-- since rev. 5839
--

USE `asterisk`;


--
-- Drop foreign key which references `ast_queues`(`_id`) in table
-- `user_watchlist` and add an index for `user_id`:
--

ALTER TABLE `queue_log` DROP FOREIGN KEY `queue_log_ibfk_1`;
ALTER TABLE `queue_log` ADD INDEX (`user_id`);


--
-- since rev. 6211
--

USE `asterisk`;


--
-- Add new column `user_grp_id` in table `routes`
--

ALTER TABLE `routes`
  ADD `user_grp_id` MEDIUMINT UNSIGNED NULL default NULL AFTER `h_to`;
ALTER TABLE `routes`
  ADD INDEX `user_grp_id` (`user_grp_id`);
ALTER TABLE `routes`
  ADD CONSTRAINT `routes_ibfk_1`
  FOREIGN KEY (`user_grp_id`)
  REFERENCES `user_groups` (`id`)
  ON DELETE CASCADE ON UPDATE CASCADE;


--
-- since rev. 6440
--

USE `asterisk`;


--
-- Create new table `config_options`:
--

CREATE TABLE IF NOT EXISTS `config_options` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `ident` varchar(40) character set ascii default NULL,
  `type` varchar(10) default NULL,
  `possibilities` varchar(200) default NULL,
  `value` varchar(100) default NULL,
  `default` varchar(100) default NULL,
  `path` varchar(100) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


LOCK TABLES `config_options` WRITE;
/*!40000 ALTER TABLE `config_options` DISABLE KEYS */;
INSERT INTO `config_options` VALUES (326,'DB_SIP_REG_UPDATE','BOOL',NULL,NULL,'0','/');
INSERT INTO `config_options` VALUES (327,'LDAP_HOST','IP',NULL,NULL,'0.0.0.0','/ldap');
INSERT INTO `config_options` VALUES (328,'LDAP_SSL','BOOL','',NULL,'0','/ldap');
INSERT INTO `config_options` VALUES (329,'LDAP_PORT','INT',NULL,NULL,'0','/ldap');
INSERT INTO `config_options` VALUES (330,'LDAP_BINDDN','TEXT',NULL,NULL,'','/ldap');
INSERT INTO `config_options` VALUES (331,'LDAP_PWD','TEXT',NULL,NULL,'','/ldap');
INSERT INTO `config_options` VALUES (332,'LDAP_PROTOCOL','SELECT','2|3',NULL,'3','/ldap');
INSERT INTO `config_options` VALUES (333,'LDAP_SEARCHBASE','TEXT',NULL,NULL,'','/ldap');
INSERT INTO `config_options` VALUES (334,'LDAP_PROP_USER','TEXT',NULL,NULL,'uid','/ldap');
INSERT INTO `config_options` VALUES (335,'LDAP_PROP_UID','TEXT',NULL,NULL,'uid','/ldap');
INSERT INTO `config_options` VALUES (336,'LDAP_PROP_FIRSTNAME','TEXT',NULL,NULL,'givenname','/ldap');
INSERT INTO `config_options` VALUES (337,'LDAP_PROP_LASTNAME','TEXT',NULL,NULL,'sn','/ldap');
INSERT INTO `config_options` VALUES (338,'LDAP_PROP_PHONE','TEXT',NULL,NULL,'telephonenumber','/ldap');
INSERT INTO `config_options` VALUES (339,'LDAP_PROP_EMAIL','TEXT',NULL,NULL,'mail','/ldap');
INSERT INTO `config_options` VALUES (340,'GUI_AUTH_METHOD','SELECT','gemeinschaft|webseal',NULL,'gemeinschaft','/gui');
INSERT INTO `config_options` VALUES (341,'GUI_NUM_RESULTS','INT','',NULL,'12','/gui');
INSERT INTO `config_options` VALUES (342,'GUI_SUDO_ADMINS','COMMA_SEP_',NULL,NULL,'','/gui');
INSERT INTO `config_options` VALUES (343,'GUI_SUDO_EXTENDED','TEXT','',NULL,'','/gui');
INSERT INTO `config_options` VALUES (344,'GUI_PERMISSIONS_METHOD','TEXT',NULL,NULL,'gemeinschaft','/gui');
INSERT INTO `config_options` VALUES (345,'GUI_USER_MAP_METHOD','TEXT',NULL,NULL,'','/gui');
INSERT INTO `config_options` VALUES (346,'GUI_QUEUE_SHOW_NUM_CALLS','BOOL',NULL,NULL,'0','/gui');
INSERT INTO `config_options` VALUES (347,'GUI_QUEUE_INFO_FROM_DB','BOOL',NULL,NULL,'1','/gui');
INSERT INTO `config_options` VALUES (348,'GUI_MON_NOQUEUEBLUE','BOOL','',NULL,'1','/gui');
INSERT INTO `config_options` VALUES (349,'GUI_MON_PEERS_ENABLED','BOOL',NULL,NULL,'1','/gui');
INSERT INTO `config_options` VALUES (350,'GUI_SHUTDOWN_ENABLED','BOOL',NULL,NULL,'0','/gui');
INSERT INTO `config_options` VALUES (351,'GUI_LANGS','TEXT',NULL,NULL,'de_DE:de_DE:de-DE:De','/gui');
INSERT INTO `config_options` VALUES (352,'GUI_ADDITIONAL_STYLESHEET','TEXT','',NULL,'gemeinschaft.css','/gui');
INSERT INTO `config_options` VALUES (353,'EXTERNAL_NUMBERS_BACKEND','SELECT','db|ldap',NULL,'db','/ldap');
INSERT INTO `config_options` VALUES (354,'EXTERNAL_NUMBERS_LDAP_PROP','TEXT',NULL,NULL,'','/ldap');
INSERT INTO `config_options` VALUES (355,'NOBODY_EXTEN_PATTERN','TEXT',NULL,NULL,'95xxxx','/');
INSERT INTO `config_options` VALUES (356,'NOBODY_CID_NAME','TEXT',NULL,NULL,'Namenlos-','/');
INSERT INTO `config_options` VALUES (357,'PROV_HOST','IP',NULL,NULL,'192.168.1.130','/prov');
INSERT INTO `config_options` VALUES (358,'PROV_PORT','INT',NULL,NULL,'0','/prov');
INSERT INTO `config_options` VALUES (359,'PROV_SCHEME','SELECT','http|https',NULL,'http','/prov');
INSERT INTO `config_options` VALUES (360,'PROV_PATH','TEXT',NULL,NULL,'/gemeinschaft/prov/','/prov');
INSERT INTO `config_options` VALUES (361,'PROV_AUTO_ADD_PHONE','BOOL',NULL,NULL,'1','/prov');
INSERT INTO `config_options` VALUES (362,'PROV_AUTO_ADD_PHONE_HOST','SELECT','first|last|random',NULL,'first','/prov');
INSERT INTO `config_options` VALUES (363,'PROV_DIAL_LOG_LIFE','INT','',NULL,'1209600','/prov');
INSERT INTO `config_options` VALUES (364,'PROV_PROXIES_TRUST','TEXT',NULL,NULL,'','/prov');
INSERT INTO `config_options` VALUES (365,'PROV_PROXIES_XFF_HEADER','TEXT',NULL,NULL,'X-Forwarded-For','/prov');
INSERT INTO `config_options` VALUES (366,'PROV_ALLOW_NET','COMMA_SEP_',NULL,NULL,'0.0.0.0/0','/prov');
INSERT INTO `config_options` VALUES (367,'PROV_LAN_NETS','COMMA_SEP_',NULL,NULL,'0.0.0.0/0','/prov');
INSERT INTO `config_options` VALUES (368,'PROV_MODELS_ENABLED_SNOM','COMMA_SEP_',NULL,NULL,'*','/prov/snom');
INSERT INTO `config_options` VALUES (369,'PROV_MODELS_ENABLED_SIEMENS','COMMA_SEP_',NULL,NULL,'*','/prov/siemens');
INSERT INTO `config_options` VALUES (370,'PROV_MODELS_ENABLED_AASTRA','COMMA_SEP_',NULL,NULL,'*','/prov/aastra');
INSERT INTO `config_options` VALUES (371,'PROV_MODELS_ENABLED_GRANDSTREAM','COMMA_SEP_',NULL,NULL,'*','/prov/grandstream');
INSERT INTO `config_options` VALUES (372,'SNOM_PROV_ENABLED','BOOL',NULL,NULL,'1','/prov/snom');
INSERT INTO `config_options` VALUES (373,'SNOM_PROV_HTTP_USER','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (374,'SNOM_PROV_HTTP_PASS','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (375,'SNOM_PROV_PB_NUM_RESULTS','INT',NULL,NULL,'15','/prov/snom');
INSERT INTO `config_options` VALUES (376,'SNOM_PROV_FW_UPDATE','BOOL',NULL,NULL,'0','/prov/snom');
INSERT INTO `config_options` VALUES (377,'SNOM_PROV_FW_6TO7','BOOL',NULL,NULL,'0','/prov/snom');
INSERT INTO `config_options` VALUES (378,'SNOM_PROV_FW_DEFAULT_300','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (379,'SNOM_PROV_FW_DEFAULT_320','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (380,'SNOM_PROV_FW_DEFAULT_360','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (381,'SNOM_PROV_FW_DEFAULT_370','TEXT',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (382,'SNOM_PROV_KEY_BLACKLIST','COMMA_SEP_',NULL,NULL,'','/prov/snom');
INSERT INTO `config_options` VALUES (383,'SNOM_PROV_M3_ACCOUNTS','INT',NULL,NULL,'1','/prov/snom');
INSERT INTO `config_options` VALUES (384,'SIEMENS_PROV_ENABLED','BOOL',NULL,NULL,'1','/prov/siemens');
INSERT INTO `config_options` VALUES (385,'SIEMENS_PROV_PREFER_HTTP','BOOL',NULL,NULL,'1','/prov/siemens');
INSERT INTO `config_options` VALUES (386,'SIEMENS_PROV_FW_DEFAULT_OS20','TEXT',NULL,NULL,'','/prov/siemens');
INSERT INTO `config_options` VALUES (387,'SIEMENS_PROV_FW_DEFAULT_OS40','TEXT',NULL,NULL,'','/prov/siemens');
INSERT INTO `config_options` VALUES (388,'SIEMENS_PROV_FW_DEFAULT_OS60','TEXT',NULL,NULL,'','/prov/siemens');
INSERT INTO `config_options` VALUES (389,'SIEMENS_PROV_FW_DEFAULT_OS80','TEXT',NULL,NULL,'','/prov/siemens');
INSERT INTO `config_options` VALUES (390,'SIEMENS_PROV_KEY_BLACKLIST','COMMA_SEP_',NULL,NULL,'','/prov/siemens');
INSERT INTO `config_options` VALUES (391,'AASTRA_PROV_ENABLED','BOOL',NULL,NULL,'1','/prov/aastra');
INSERT INTO `config_options` VALUES (392,'AASTRA_PROV_PB_NUM_RESULTS','INT',NULL,NULL,'10','/prov/aastra');
INSERT INTO `config_options` VALUES (393,'AASTRA_PROV_FW_DEFAULT_51I','TEXT',NULL,NULL,'','/prov/aastra');
INSERT INTO `config_options` VALUES (394,'AASTRA_PROV_FW_DEFAULT_53I','TEXT',NULL,NULL,'','/prov/aastra');
INSERT INTO `config_options` VALUES (395,'AASTRA_PROV_FW_DEFAULT_55I','TEXT',NULL,NULL,'','/prov/aastra');
INSERT INTO `config_options` VALUES (396,'AASTRA_PROV_FW_DEFAULT_57I','TEXT',NULL,NULL,'','/prov/aastra');
INSERT INTO `config_options` VALUES (397,'AASTRA_PROV_KEY_BLACKLIST','TEXT',NULL,NULL,'','/prov/aastra');
INSERT INTO `config_options` VALUES (398,'GRANDSTREAM_PROV_ENABLED','BOOL',NULL,NULL,'','/prov/grandstream');
INSERT INTO `config_options` VALUES (399,'GRANDSTREAM_PROV_HTTP_PASS','TEXT',NULL,NULL,'admin','/prov/grandstream');
INSERT INTO `config_options` VALUES (400,'GRANDSTREAM_PROV_NTP','IP',NULL,NULL,'192.168.1.130','/prov/grandstream');
INSERT INTO `config_options` VALUES (401,'GRANDSTREAM_PROV_KEY_BLACKLIST','COMMA_SEP_',NULL,NULL,'','/prov/grandstream');
INSERT INTO `config_options` VALUES (402,'CANONIZE_OUTBOUND','BOOL',NULL,NULL,'1','/canonize');
INSERT INTO `config_options` VALUES (403,'CANONIZE_INTL_PREFIX','TEXT',NULL,NULL,'00','/canonize');
INSERT INTO `config_options` VALUES (404,'CANONIZE_COUNTRY_CODE','TEXT',NULL,NULL,'49','/canonize');
INSERT INTO `config_options` VALUES (405,'CANONIZE_NATL_PREFIX','TEXT',NULL,NULL,'0','/canonize');
INSERT INTO `config_options` VALUES (406,'CANONIZE_NATL_PREFIX_INTL','TEXT',NULL,NULL,'','/canonize');
INSERT INTO `config_options` VALUES (407,'CANONIZE_AREA_CODE','TEXT',NULL,NULL,'251','/canonize');
INSERT INTO `config_options` VALUES (408,'CANONIZE_LOCAL_BRANCH','TEXT',NULL,NULL,'702','/canonize');
INSERT INTO `config_options` VALUES (409,'CANONIZE_SPECIAL','TEXT',NULL,NULL,'/^1(?:1[0-9]{1,5}|92','/canonize');
INSERT INTO `config_options` VALUES (410,'CANONIZE_CBC_PREFIX','TEXT',NULL,NULL,'010','/canonize');
INSERT INTO `config_options` VALUES (411,'DP_SUBSYSTEM','BOOL',NULL,NULL,'','/dialplan');
INSERT INTO `config_options` VALUES (412,'DP_EMERGENCY_POLICE','COMMA_SEP_',NULL,NULL,'110,0110','/dialplan');
INSERT INTO `config_options` VALUES (413,'DP_EMERGENCY_POLICE_MAP','COMMA_SEP_',NULL,NULL,'110','/dialplan');
INSERT INTO `config_options` VALUES (414,'DP_EMERGENCY_FIRE','COMMA_SEP_',NULL,NULL,'112,0112','/dialplan');
INSERT INTO `config_options` VALUES (415,'DP_EMERGENCY_FIRE_MAP','COMMA_SEP_',NULL,NULL,'112','/dialplan');
INSERT INTO `config_options` VALUES (416,'DP_DIALTIMEOUT_IN','INT',NULL,NULL,'45','/dialplan');
INSERT INTO `config_options` VALUES (417,'DP_PRV_CALL_PREFIX','TEXT',NULL,NULL,'*7*','/dialplan');
INSERT INTO `config_options` VALUES (418,'DP_FORWARD_REQ_EXT_NUM','BOOL',NULL,NULL,'1','/dialplan');
INSERT INTO `config_options` VALUES (419,'DP_ALLOW_DIRECT_DIAL','BOOL',NULL,NULL,'0','/dialplan');
INSERT INTO `config_options` VALUES (420,'DP_CONNID','BOOL',NULL,NULL,'0','/dialplan');
INSERT INTO `config_options` VALUES (421,'PB_IMPORTED_ENABLED','BOOL',NULL,NULL,'','/phonebook');
INSERT INTO `config_options` VALUES (422,'PB_IMPORTED_ORDER','INT',NULL,NULL,'2','/phonebook');
INSERT INTO `config_options` VALUES (423,'PB_IMPORTED_TITLE','TEXT',NULL,NULL,'Importiert','/phonebook');
INSERT INTO `config_options` VALUES (424,'PB_INTERNAL_TITLE','TEXT',NULL,NULL,'Intern','/phonebook');
INSERT INTO `config_options` VALUES (425,'PB_PRIVATE_TITLE','TEXT',NULL,NULL,'Persönlich','/phonebook');
INSERT INTO `config_options` VALUES (426,'LOCK_DIR','TEXT',NULL,NULL,'/tmp/','/');
INSERT INTO `config_options` VALUES (427,'CALL_INIT_FROM_NET','TEXT',NULL,NULL,'192.168.1.0/24','/');
INSERT INTO `config_options` VALUES (428,'MONITOR_FROM_NET','TEXT',NULL,NULL,'192.168.1.0/24','/');
INSERT INTO `config_options` VALUES (429,'LVM_USER_6_DIGIT_INT','TEXT',NULL,NULL,'','/misc');
INSERT INTO `config_options` VALUES (430,'LVM_CALL_INIT_USERS_500000','TEXT',NULL,NULL,'','/misc');
INSERT INTO `config_options` VALUES (431,'CC_TIMEOUT','INT',NULL,NULL,'60','/');
INSERT INTO `config_options` VALUES (432,'INTL_LANG','TEXT',NULL,NULL,'de_DE','/gui');
INSERT INTO `config_options` VALUES (433,'INTL_USE_GETTEXT','TEXT',NULL,NULL,'','/gui');
INSERT INTO `config_options` VALUES (434,'INTL_ASTERISK_LANG','TEXT',NULL,NULL,'de','/dialplan');
INSERT INTO `config_options` VALUES (435,'USERCOMMENT_OFFTIME','TEXT',NULL,NULL,'Feierabend','/gui');
INSERT INTO `config_options` VALUES (436,'EMAIL_PATTERN_VALID','TEXT',NULL,NULL,'/^[a-z0-9\\-._]+@[a-z0-9\\-._]{2,80}\\.[a-z]{2,10}$/i','/');
INSERT INTO `config_options` VALUES (437,'EMAIL_DELIVERY','SELECT','sendmail|direct-snmp',NULL,'sendmail','/');
INSERT INTO `config_options` VALUES (438,'FAX_ENABLED','BOOL',NULL,NULL,'','/fax');
INSERT INTO `config_options` VALUES (439,'FAX_TSI_PREFIX','TEXT',NULL,NULL,'0251702','/fax');
INSERT INTO `config_options` VALUES (440,'FAX_PREFIX','TEXT',NULL,NULL,'','/fax');
INSERT INTO `config_options` VALUES (441,'FAX_TSI','TEXT',NULL,NULL,'','/fax');
INSERT INTO `config_options` VALUES (442,'FAX_HYLAFAX_HOST','IP',NULL,NULL,'127.0.0.1','/fax');
INSERT INTO `config_options` VALUES (443,'FAX_HYLAFAX_PORT','INT',NULL,NULL,'4559','/fax');
INSERT INTO `config_options` VALUES (444,'FAX_HYLAFAX_ADMIN','TEXT',NULL,NULL,'','/fax');
INSERT INTO `config_options` VALUES (445,'FAX_HYLAFAX_PASS','TEXT',NULL,NULL,'','/fax');
INSERT INTO `config_options` VALUES (446,'FAX_HYLAFAX_PATH','TEXT',NULL,NULL,'/var/spool/hylafax/','/fax');
INSERT INTO `config_options` VALUES (447,'BOI_ENABLED','BOOL',NULL,NULL,'0','/boi');
INSERT INTO `config_options` VALUES (448,'BOI_API_DEFAULT','TEXT',NULL,NULL,'','/boi');
INSERT INTO `config_options` VALUES (449,'BOI_BRANCH_NETMASK','TEXT',NULL,NULL,'/16','/boi');
INSERT INTO `config_options` VALUES (450,'BOI_BRANCH_PBX','IP',NULL,NULL,'192.168.24.130','/boi');
INSERT INTO `config_options` VALUES (451,'BOI_NOBODY_EXTEN_PATTERN','TEXT',NULL,NULL,'95xxxx','/boi');
INSERT INTO `config_options` VALUES (452,'BOI_GUI_REVERSE_PROXY','TEXT',NULL,NULL,'http://192.168.1.130','/boi');
INSERT INTO `config_options` VALUES (453,'BOI_GUI_HOME_USER','TEXT',NULL,NULL,'information/praesenz','/boi');
INSERT INTO `config_options` VALUES (454,'BOI_GUI_HOME_ADMIN','TEXT',NULL,NULL,'information/status','/boi');
INSERT INTO `config_options` VALUES (455,'LOG_TO','SELECT','file|syslog',NULL,'file','/log');
INSERT INTO `config_options` VALUES (456,'LOG_FILE','TEXT',NULL,NULL,'/var/log/gemeinschaft.log','/log');
INSERT INTO `config_options` VALUES (457,'LOG_GMT','BOOL',NULL,NULL,'1','/log');
INSERT INTO `config_options` VALUES (458,'LOG_SYSLOG_FACILITY','SELECT','local0|local1|local2|local3|local4|local5|local6|local7|local8|local9|user',NULL,'local5','/log');
INSERT INTO `config_options` VALUES (459,'LOG_LEVEL','SELECT','FATAL|WARNING|NOTICE|DEBUG',NULL,'NOTICE','/log');
/*!40000 ALTER TABLE `config_options` ENABLE KEYS */;
UNLOCK TABLES;



